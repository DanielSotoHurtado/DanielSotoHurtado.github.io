---
title: 'Programming with the tidyverse'
date: 2013-08-14
permalink: /posts/2013/08/blog-post-2/
tags:
  - R
  - dplyr
  - ggplot
---

So, this should be quite straigthforward:
```
eda_count_1 <- function(data, var) {
  data |> 
    count( var , sort = TRUE) |> 
    mutate(pct = round((n/sum(n)) * 100, digits = 2)) |> 
    drop_na( var )
}
```
However if we run the code we'll get an error.


The main issue is that the tidyverse uses tidy evaluation - a form of non-standard evaluation. You can by-pass this behavior making use of the curly-curly brackets `{{}}`:

```
eda_count_1 <- function(data, var) {
  data |> 
    # make sure to embrace var with {{}} 'curly-curly'
    count({{ var }}, sort = TRUE) |> 
    mutate(pct = round((n/sum(n)) * 100, digits = 2)) |> 
    drop_na({{ var }})
}
```
And voila!
